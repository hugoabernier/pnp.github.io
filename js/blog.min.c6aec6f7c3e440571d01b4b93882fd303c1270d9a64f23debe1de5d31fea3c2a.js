"use strict";var __awaiter=this&&this.__awaiter||function(e,t,n,s){function o(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function r(e){try{a(s.next(e))}catch(e){i(e)}}function c(e){try{a(s.throw(e))}catch(e){i(e)}}function a(e){e.done?n(e.value):o(e.value).then(r,c)}a((s=s.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){var n,o,i,a,s={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function r(e){return function(t){return c([e,t])}}function c(r){if(a)throw new TypeError("Generator is already executing.");for(;i&&(i=0,r[0]&&(s=0)),s;)try{if(a=1,o&&(n=r[0]&2?o.return:r[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,r[1])).done)return n;switch((o=0,n)&&(r=[r[0]&2,n.value]),r[0]){case 0:case 1:n=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(n=s.trys,n=n.length>0&&n[n.length-1])&&(r[0]===6||r[0]===2)){s=0;continue}if(r[0]===3&&(!n||r[1]>n[0]&&r[1]<n[3])){s.label=r[1];break}if(r[0]===6&&s.label<n[1]){s.label=n[1],n=r;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(r);break}n[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],o=0}finally{a=n=0}if(r[0]&5)throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}},parseRss=function(e){var t=new DOMParser,n=t.parseFromString(e,"text/xml"),s=Array.from(n.querySelectorAll("item"));return s.map(function(e){var t,n,s,o,i,a;return{title:((t=e.querySelector("title"))===null||t===void 0?void 0:t.textContent)||"",description:((n=e.querySelector("description"))===null||n===void 0?void 0:n.textContent)||"",link:((s=e.querySelector("link"))===null||s===void 0?void 0:s.textContent)||"",category:((o=e.querySelector("category"))===null||o===void 0?void 0:o.textContent)||"",pubDate:((i=e.querySelector("pubDate"))===null||i===void 0?void 0:i.textContent)||"",mediaContentUrl:((a=e.querySelector("content"))===null||a===void 0?void 0:a.getAttribute("url"))||""}})},createDiv=function(e){return __awaiter(void 0,void 0,void 0,function(){var t,n,s,o;return __generator(this,function(i){switch(i.label){case 0:return[4,fetch("/templates/blog-item.html")];case 1:return o=i.sent(),[4,o.text()];case 2:t=i.sent();for(n in e)t=t.replace("{{".concat(n,"}}"),e[n]||"");return s=document.createElement("li"),s.innerHTML=t,[2,s]}})})},displayRss=function(){return __awaiter(void 0,void 0,void 0,function(){var e,t,n,s;return __generator(this,function(o){switch(o.label){case 0:return[4,fetch("https://pnp.github.io/blog/index.xml")];case 1:return t=o.sent(),[4,t.text()];case 2:return n=o.sent(),s=parseRss(n).slice(0,4),e=document.querySelector("#rss-section"),s.forEach(function(t){var n=createDiv(t);e&&e.appendChild(n)}),[2]}})})};window.addEventListener("DOMContentLoaded",displayRss)